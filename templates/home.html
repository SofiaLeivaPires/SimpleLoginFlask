<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Home</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <style>
        #flash-message {
            opacity: 1;
            transition: opacity 0.5s ease-out;
        }
        #flash-message.fade-out {
            opacity: 0;
        }
    </style>
</head>
<body>
    <div class="container dashboard text-center">
        <div class="card shadow p-4 mt-5 w-50 mx-auto">
            <h2 class="mb-3">Bem-vindo, {{ username }}!</h2>
            <p class="lead">Você está autenticado!</p>

            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                        <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert" id="flash-message">
                            {{ message }}
                            <button type="button" class="btn-close" data-bs-dismiss="alert" ></button>
                        </div>
                    {% endfor %}
                {% endif %}
            {% endwith %}

            <a class="btn btn-danger mt-3" href="{{ url_for('logout') }}">Sair</a>
        </div>
    </div>

    <script>
        window.onload = function() {
            const flash = document.getElementById('flash-message');
            if (flash) {
                setTimeout(() => {
                    flash.classList.add('fade-out');
                }, 2500);
                setTimeout(() => {
                    flash.style.display = 'none';
                }, 3000);
            }
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
</body>
</html>